í/
pC:\Users\david\Desktop\Gaia\GIT\demo-practice-security\demo-practice-security-net\Controllers\UsersController.cs
	namespace 	#
DemoPracticeSecurityNet
 !
.! "
Controllers" -
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
UsersController  
:! "
ControllerBase# 1
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
private 
readonly 
IConfiguration '
_configuration( 6
;6 7
public 
UsersController 
(  
ApplicationDbContext 3
context4 ;
,; <
IConfiguration= K
configurationL Y
)Y Z
{ 	
_context 
= 
context 
; 
_configuration 
= 
configuration *
;* +
} 	
[ 	
HttpGet	 
( 
$str 
)  
]  !
public 
async 
Task 
< 
ActionResult &
<& '
User' +
>+ ,
>, -
GetUserProfile. <
(< =
int= @
idA C
)C D
{ 	
var 
user 
= 
await 
_context %
.% &
Users& +
.+ ,
	FindAsync, 5
(5 6
id6 8
)8 9
;9 :
if 
( 
user 
== 
null 
) 
{ 
return 
NotFound 
(  
)  !
;! "
} 
return 
user 
; 
}   	
[## 	
HttpGet##	 
(## 
$str## 
)## 
]## 
public$$ 
IActionResult$$ 
SearchUsers$$ (
($$( )
string$$) /
query$$0 5
)$$5 6
{%% 	
var&& 
connectionString&&  
=&&! "
_configuration&&# 1
.&&1 2
GetConnectionString&&2 E
(&&E F
$str&&F Y
)&&Y Z
;&&Z [
using'' 
var'' 

connection''  
=''! "
new''# &
SqlConnection''' 4
(''4 5
connectionString''5 E
)''E F
;''F G

connection(( 
.(( 
Open(( 
((( 
)(( 
;(( 
using)) 
var)) 
command)) 
=)) 
new))  #

SqlCommand))$ .
()). /
$"))/ 1
$str))1 [
{))[ \
query))\ a
}))a b
$str))b d
"))d e
,))e f

connection))g q
)))q r
;))r s
var** 
reader** 
=** 
command**  
.**  !
ExecuteReader**! .
(**. /
)**/ 0
;**0 1
var,, 
result,, 
=,, 
new,, 
List,, !
<,,! "

Dictionary,," ,
<,,, -
string,,- 3
,,,3 4
object,,5 ;
>,,; <
>,,< =
(,,= >
),,> ?
;,,? @
while-- 
(-- 
reader-- 
.-- 
Read-- 
(-- 
)--  
)--  !
{.. 
var// 
row// 
=// 
new// 

Dictionary// (
<//( )
string//) /
,/// 0
object//1 7
>//7 8
(//8 9
)//9 :
;//: ;
for00 
(00 
int00 
i00 
=00 
$num00 
;00 
i00  !
<00" #
reader00$ *
.00* +

FieldCount00+ 5
;005 6
i007 8
++008 :
)00: ;
{11 
row22 
[22 
reader22 
.22 
GetName22 &
(22& '
i22' (
)22( )
]22) *
=22+ ,
reader22- 3
.223 4
GetValue224 <
(22< =
i22= >
)22> ?
;22? @
}33 
result44 
.44 
Add44 
(44 
row44 
)44 
;44  
}55 
return77 
Ok77 
(77 
result77 
)77 
;77 
}88 	
[;; 	
HttpPost;;	 
(;; 
$str;; 
);; 
];; 
public<< 
ContentResult<< 

AddComment<< '
(<<' (
[<<( )
FromBody<<) 1
]<<1 2
string<<3 9
comment<<: A
)<<A B
{== 	
return>> 
new>> 
ContentResult>> $
{?? 
Content@@ 
=@@ 
$"@@ 
$str@@ 1
{@@1 2
comment@@2 9
}@@9 :
$str@@: @
"@@@ A
,@@A B
ContentTypeAA 
=AA 
$strAA )
}BB 
;BB 
}CC 	
[FF 	
HttpPostFF	 
]FF 
publicGG 
asyncGG 
TaskGG 
<GG 
ActionResultGG &
<GG& '
UserGG' +
>GG+ ,
>GG, -

CreateUserGG. 8
(GG8 9
UserGG9 =
userGG> B
)GGB C
{HH 	
_contextII 
.II 
UsersII 
.II 
AddII 
(II 
userII #
)II# $
;II$ %
awaitJJ 
_contextJJ 
.JJ 
SaveChangesAsyncJJ +
(JJ+ ,
)JJ, -
;JJ- .
returnKK 
userKK 
;KK 
}LL 	
}MM 
}NN „
nC:\Users\david\Desktop\Gaia\GIT\demo-practice-security\demo-practice-security-net\Data\ApplicationDbContext.cs
	namespace 	#
DemoPracticeSecurityNet
 !
.! "
Data" &
{ 
public 

class  
ApplicationDbContext %
:& '
	DbContext( 1
{ 
public  
ApplicationDbContext #
(# $
DbContextOptions$ 4
<4 5 
ApplicationDbContext5 I
>I J
optionsK R
)R S
:		 
base		 
(		 
options		 
)		 
{

 	
} 	
public 
DbSet 
< 
User 
> 
Users  
{! "
get# &
;& '
set( +
;+ ,
}- .
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
User  $
>$ %
(% &
)& '
.' (
HasData( /
(/ 0
new 
User 
{ 
Id 
= 
$num 
, 
UserId 
= 
$num 
, 
Username 
= 
$str &
,& '
Password 
= 
$str )
,) *
Email 
= 
$str /
,/ 0

CreditCard 
=  
$str! 6
,6 7
IsAdmin 
= 
true "
," #
PrivateNotes  
=! "
$str# ?
} 
, 
new 
User 
{ 
Id 
= 
$num 
, 
UserId   
=   
$num   
,   
Username!! 
=!! 
$str!! )
,!!) *
Password"" 
="" 
$str"" ,
,"", -
Email## 
=## 
$str## .
,##. /

CreditCard$$ 
=$$  
$str$$! 6
,$$6 7
IsAdmin%% 
=%% 
false%% #
,%%# $
PrivateNotes&&  
=&&! "
$str&&# ;
}'' 
)(( 
;(( 
})) 	
}** 
}++ ¡*
|C:\Users\david\Desktop\Gaia\GIT\demo-practice-security\demo-practice-security-net\Migrations\20250202120031_InitialCreate.cs
	namespace 	#
DemoPracticeSecurityNet
 !
.! "

Migrations" ,
{ 
public

 

partial

 
class

 
InitialCreate

 &
:

' (
	Migration

) 2
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 6
,6 7
nullable8 @
:@ A
falseB G
)G H
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
UserId 
= 
table "
." #
Column# )
<) *
int* -
>- .
(. /
type/ 3
:3 4
$str5 :
,: ;
nullable< D
:D E
falseF K
)K L
,L M
Username 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
falseU Z
)Z [
,[ \
Password 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
falseU Z
)Z [
,[ \
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 F
,F G
nullableH P
:P Q
falseR W
)W X
,X Y

CreditCard 
=  
table! &
.& '
Column' -
<- .
string. 4
>4 5
(5 6
type6 :
:: ;
$str< K
,K L
nullableM U
:U V
falseW \
)\ ]
,] ^
IsAdmin 
= 
table #
.# $
Column$ *
<* +
bool+ /
>/ 0
(0 1
type1 5
:5 6
$str7 <
,< =
nullable> F
:F G
falseH M
)M N
,N O
PrivateNotes  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> M
,M N
nullableO W
:W X
falseY ^
)^ _
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% /
,/ 0
x1 2
=>3 5
x6 7
.7 8
Id8 :
): ;
;; <
}   
)   
;   
migrationBuilder"" 
."" 

InsertData"" '
(""' (
table## 
:## 
$str## 
,## 
columns$$ 
:$$ 
new$$ 
[$$ 
]$$ 
{$$  
$str$$! %
,$$% &
$str$$' 3
,$$3 4
$str$$5 <
,$$< =
$str$$> G
,$$G H
$str$$I S
,$$S T
$str$$U c
,$$c d
$str$$e m
,$$m n
$str$$o y
}$$z {
,$${ |
values%% 
:%% 
new%% 
object%% "
[%%" #
,%%# $
]%%$ %
{&& 
{'' 
$num'' 
,'' 
$str'' .
,''. /
$str''0 C
,''C D
true''E I
,''I J
$str''K U
,''U V
$str''W s
,''s t
$num''u v
,''v w
$str''x 
}
''Ä Å
,
''Å Ç
{(( 
$num(( 
,(( 
$str(( .
,((. /
$str((0 B
,((B C
false((D I
,((I J
$str((K X
,((X Y
$str((Z r
,((r s
$num((t u
,((u v
$str	((w Å
}
((Ç É
})) 
))) 
;)) 
}** 	
	protected-- 
override-- 
void-- 
Down--  $
(--$ %
MigrationBuilder--% 5
migrationBuilder--6 F
)--F G
{.. 	
migrationBuilder// 
.// 
	DropTable// &
(//& '
name00 
:00 
$str00 
)00 
;00 
}11 	
}22 
}33 ¶
`C:\Users\david\Desktop\Gaia\GIT\demo-practice-security\demo-practice-security-net\Models\User.cs
	namespace 	#
DemoPracticeSecurityNet
 !
.! "
Models" (
{ 
public 

class 
User 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public		 
string		 
Username		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
=		- .
string		/ 5
.		5 6
Empty		6 ;
;		; <
public

 
string

 
Password

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
=

- .
string

/ 5
.

5 6
Empty

6 ;
;

; <
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
string 

CreditCard  
{! "
get# &
;& '
set( +
;+ ,
}- .
=/ 0
string1 7
.7 8
Empty8 =
;= >
public 
bool 
IsAdmin 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
PrivateNotes "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
string3 9
.9 :
Empty: ?
;? @
} 
} õ
\C:\Users\david\Desktop\Gaia\GIT\demo-practice-security\demo-practice-security-net\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
.! "
AddJsonOptions" 0
(0 1
options1 8
=>9 ;
{ 
options 
. !
JsonSerializerOptions !
.! " 
PropertyNamingPolicy" 6
=7 8
null9 =
;= >
}		 
)		 
;		 
builder 
. 
Services 
. 
AddDbContext 
<  
ApplicationDbContext 2
>2 3
(3 4
options4 ;
=>< >
options 
. 
UseSqlServer 
( 
builder  
.  !
Configuration! .
.. /
GetConnectionString/ B
(B C
$strC V
)V W
)W X
)X Y
;Y Z
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
app 
. 
Use 
( 
async 
( 
context 
, 
next 
) 
=>  
{ 
try 
{ 
await 
next 
( 
) 
; 
} 
catch 	
(
 
	Exception 
ex 
) 
{ 
context 
. 
Response 
. 
ContentType $
=% &
$str' 3
;3 4
await 
context 
. 
Response 
. 

WriteAsync )
() *
$"* ,
$str, 3
{3 4
ex4 6
.6 7
Message7 >
}> ?
$str? N
{N O
exO Q
.Q R

StackTraceR \
}\ ]
"] ^
)^ _
;_ `
} 
} 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
app 
. 
Run 
( 
) 	
;	 
